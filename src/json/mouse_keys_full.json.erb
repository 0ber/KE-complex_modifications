{
    "title": "Mouse keys (full) (rev 2) [Available since Karabiner-Elements-11.3.5]",
    "rules": [
        {
            "description": "Mouse keys (full) (rev 2) [Available since Karabiner-Elements-11.3.5]",
            "manipulators": [
                <%# -------------------------------------------------- %>
                <%# Unset mouse_keys_full variable when right_command is released %>
                <%# -------------------------------------------------- %>

                {
                    "type": "basic",
                    "from": <%= from("right_command", [], ["any"]) %>,
                    "to": <%= to([["right_command"]]) %>,
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full", "value": 0 } },
                        { "set_variable": { "name": "mouse_keys_full_fast", "value": 0 } }
                    ]
                },

                <%# -------------------------------------------------- %>
                <%# enable mouse_keys_full by right_command+m %>
                <%# -------------------------------------------------- %>

                {
                    "type": "basic",
                    "from": <%= from("m", ["right_command"], ["any"]) %>,
                    "to": [
                        { "set_variable": { "name": "mouse_keys_full", "value": 1 } }
                    ]
                },

                <%# -------------------------------------------------- %>
                <%# mouse_keys %>
                <%# -------------------------------------------------- %>

                <%# scroll+fast %>

                {
                    "type": "basic",
                    "from": <%= from("h", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": 64 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": 64 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": -64 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": -64 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },

                <%# scroll %>

                {
                    "type": "basic",
                    "from": <%= from("h", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": 32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": 32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": -32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": -32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },

                <%# fast %>

                {
                    "type": "basic",
                    "from": <%= from("h", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": -3072 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": 3072 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": -3072 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": 3072 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_fast", "value": 1 }
                    ]
                },

                <%# normal %>

                {
                    "type": "basic",
                    "from": <%= from("h", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": -1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": 1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": -1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", ["right_command"], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": 1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },

                <%# buttons %>

                {
                    "type": "basic",
                    "from": <%= from("v", ["right_command"], ["any"]) %>,
                    "to": [ { "pointing_button": "button1" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("b", ["right_command"], ["any"]) %>,
                    "to": [ { "pointing_button": "button3" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("n", ["right_command"], ["any"]) %>,
                    "to": [ { "pointing_button": "button2" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },

                <%# controls %>

                {
                    "type": "basic",
                    "from": <%= from("f", ["right_command"], ["any"]) %>,
                    "to": [
                        { "set_variable": { "name": "mouse_keys_full_fast", "value": 1 } }
                    ],
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full_fast", "value": 0 } }
                    ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("s", ["right_command"], ["any"]) %>,
                    "to": [
                        { "set_variable": { "name": "mouse_keys_full_scroll", "value": 1 } }
                    ],
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full_scroll", "value": 0 } }
                    ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },

                <%# -------------------------------------------------- %>
                <%# Remove other keys by "from": { "any": "key_code" } %>
                <%# -------------------------------------------------- %>

                {
                    "description": "drop other keys",
                    "type": "basic",
                    "from": {
                        "any": "key_code",
                        "modifiers": {
                            "mandatory": [ "right_command" ],
                            "optional": [ "any" ]
                        }
                    },
                    "to": <%= to([["vk_none"]]) %>,
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                }
            ]
        }
    ]
}
